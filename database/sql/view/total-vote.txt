CREATE VIEW view_vote_totals_by_period_candidate AS SELECT
    candidates.period_id AS period_id,
    periods.name AS period_name,
    candidates.id AS candidate_id,
    candidates.name AS candidate_name,
    COUNT(votings.id) AS total
FROM candidates
LEFT JOIN votings ON votings.candidate_id = candidates.id
LEFT JOIN periods ON periods.id = candidates.period_id
GROUP BY candidate_id, candidate_name, period_id, period_name;

